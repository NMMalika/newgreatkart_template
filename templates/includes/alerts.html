{% if messages %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

{% for message in messages %}
{% if 'success' in message.tags %}
<script>
    // 1. Fire the Confetti (Falling Balloons effect)
    var end = Date.now() + (3 * 1000); // 3 seconds
    var colors = ['#4ade80', '#60a5fa', '#ffffff'];

    (function frame() {
        confetti({
            particleCount: 3,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            colors: colors
        });
        confetti({
            particleCount: 3,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            colors: colors
        });

        if (Date.now() < end) {
            requestAnimationFrame(frame);
        }
    }());

    // 2. Show the Classy Modal
    Swal.fire({
        title: 'Success!',
        text: "{{ message }}",
        icon: 'success',
        timer: 4000,
        timerProgressBar: true,
        showConfirmButton: false,
        background: '#ffffff',
        color: '#1e293b',
        backdrop: `rgba(0,0,123,0.1)`
    });
</script>
{% else %}
<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
    {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}<strong>Error: </strong>{% endif %}
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}
{% endfor %}
{% endif %}