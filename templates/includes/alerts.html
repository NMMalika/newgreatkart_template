{% if messages %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
    const Toast = Swal.mixin({
        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true
    });

    function fireConfetti() {
        var end = Date.now() + (2 * 1000);
        (function frame() {
            confetti({ particleCount: 3, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#4ade80', '#60a5fa'] });
            confetti({ particleCount: 3, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#4ade80', '#60a5fa'] });
            if (Date.now() < end) requestAnimationFrame(frame);
        }());
    }
</script>

{% for message in messages %}
{% if 'success' in message.tags %}
<script>
    fireConfetti();
    Swal.fire({
        title: 'Success!',
        text: "{{ message }}",
        icon: 'success',
        confirmButtonColor: '#60a5fa'
    });
</script>
{% elif 'error' in message.tags %}
<script>
    Swal.fire({
        title: 'Oops...',
        text: "{{ message }}",
        icon: 'error',
        confirmButtonColor: '#ef4444'
    });
</script>
{% endif %}
{% endfor %}
{% endif %}